(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{29:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(23),c=a.n(s),o=(a(29),a(9)),i=a.n(o),l=a(14),u=a(10),h=a(5),d=a(6),m=a(8),p=a(7),b=a(13),g=a.n(b);g.a.defaults.baseURL="https://pixabay.com/api/";var j="22569115-02a432c6c1c62bbb3a59801b7",f=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,r=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:1,e.next=3,g.a.get("?q=".concat(t,"&page=").concat(a,"&key=").concat(j,"&image_type=photo&orientation=horizontal&per_page=").concat(12));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=a(4),O=a(1),S=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={searchItem:""},e.handleFormChange=function(t){e.setState({searchItem:""}),e.setState({searchItem:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.searchItem.trim()?(e.props.onSubmit(e.state.searchItem),e.setState({searchItem:""})):v.b.error("empty field")},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state.searchItem;return Object(O.jsx)("header",{className:"Searchbar",children:Object(O.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(O.jsx)("button",{type:"submit",className:"SearchForm-button",onClick:this.handleSubmit,children:Object(O.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(O.jsx)("input",{value:e,onChange:this.handleFormChange,className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}}]),a}(n.Component),x=a(74),y=function(e){var t=e.id,a=e.item,n=e.onClick,r=a.webformatURL,s=a.tag;return Object(O.jsx)("li",{className:"ImageGalleryItem",children:Object(O.jsx)("img",{id:t,src:r,alt:s,onClick:n,className:"ImageGalleryItem-image"})})},w=function(e){var t=e.searchResult,a=e.onSelect;return Object(O.jsx)("section",{children:Object(O.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=Object(x.a)();return Object(O.jsx)(y,{item:e,onClick:function(){return a(e)}},t)}))})})},k=function(e){var t=e.onBtnClick;return Object(O.jsx)("div",{className:"btn_wrapper",children:Object(O.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})})},C=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(O.jsx)("div",{className:"Overlay",onClick:this.handleBackdropClick,children:Object(O.jsx)("div",{className:"Modal",children:Object(O.jsx)("img",{src:this.props.src,alt:this.props.tag})})})}}]),a}(n.Component),I=a(24),R=a.n(I),N=(a(71),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={status:"idle",page:1,searchItem:"",searchResult:[],error:null,selectedImage:null,selectedImageTag:null},e.handleFormSubmit=function(t){return e.setState({searchItem:t,page:1})},e.handleSearchResult=function(t){0===t.length?e.setState({searchResult:null}):e.setState({searchResult:t})},e.handleSelectItem=function(t){return e.setState({selectedImage:t.largeImageURL,selectedImageTag:t.tags})},e.handleModalClose=function(){e.setState({selectedImage:null})},e.handleBtnClick=function(){0!==e.state.searchResult.length&&e.setState((function(e){return{page:e.page+1}}))},e.scrollDown=function(){return window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(){var e=Object(u.a)(i.a.mark((function e(t,a){var n,r,s,c,o,u,h,d=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,r=n.searchItem,s=n.page,a.searchItem===r){e.next=16;break}return this.setState({status:"pending",page:1}),e.prev=3,e.next=6,f(r,s);case 6:return c=e.sent,0===(o=c.data.hits).length?(v.b.error("no images"),this.setState({searchResult:[],status:"idle"})):o.length>0&&(v.b.success("images found"),this.setState({searchResult:o})),e.abrupt("return",this.setState({status:"resolved"}));case 12:return e.prev=12,e.t0=e.catch(3),v.b.error("something went wrong"),e.abrupt("return",this.setState({error:e.t0,status:"rejected"}));case 16:if(!(a.page!==s&&s>1)){e.next=37;break}return this.setState({status:"pending"}),e.prev=18,e.next=21,f(r,s);case 21:if(u=e.sent,0!==(h=u.data.hits).length){e.next=27;break}return v.b.error("no more images found"),this.setState({searchResult:[],status:"idle",page:1}),e.abrupt("return");case 27:return v.b.success("more images found"),this.setState((function(e){return{searchResult:[].concat(Object(l.a)(e.searchResult),Object(l.a)(h))}})),this.setState({status:"resolved"}),this.scrollDown(),e.abrupt("return");case 34:return e.prev=34,e.t1=e.catch(18),e.abrupt("return",(function(e){return d.setState({error:e,status:"rejected"})}));case 37:case"end":return e.stop()}}),e,this,[[3,12],[18,34]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.status,a=e.searchResult,n=e.error,r=e.selectedImage,s=e.selectedImageTag,c=a.length>0&&"idle"!==t;return Object(O.jsxs)("div",{children:[Object(O.jsx)(S,{onSubmit:this.handleFormSubmit}),Object(O.jsx)(v.a,{position:"top-right"}),"pending"===t&&Object(O.jsx)("div",{className:"loader_wrapper",children:Object(O.jsx)(R.a,{type:"TailSpin",color:"#3f51b5",height:60,width:60,className:"Loader"})}),"rejected"===t&&Object(O.jsx)("h2",{className:"error",children:n.message}),"resolved"===t&&Object(O.jsxs)("div",{children:[Object(O.jsx)(w,{searchResult:a,onSelect:this.handleSelectItem}),c&&Object(O.jsx)(k,{onBtnClick:this.handleBtnClick}),r&&Object(O.jsx)(C,{src:r,tag:s,onClose:this.handleModalClose})]})]})}}]),a}(n.Component)),F=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,75)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};c.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(N,{})}),document.getElementById("root")),F()}},[[72,1,2]]]);
//# sourceMappingURL=main.62e595b3.chunk.js.map
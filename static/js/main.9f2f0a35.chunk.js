(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{14:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(8),s=a.n(c),o=(a(14),a(3)),i=a(4),l=a(6),h=a(5),u=a(0),d=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchItem:""},e.handleFormChange=function(t){e.setState({searchItem:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.searchItem.trim()?(e.props.onSubmit(e.state.searchItem),e.setState({searchItem:""})):console.log("enter image name")},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.searchItem;return Object(u.jsx)("header",{className:"Searchbar",children:Object(u.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(u.jsx)("button",{type:"submit",className:"SearchForm-button",onClick:this.handleSubmit,children:Object(u.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(u.jsx)("input",{value:e,onChange:this.handleFormChange,className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}}]),a}(n.Component),m=function(e){var t=e.id,a=e.src,n=e.tag,r=e.currentImage;return Object(u.jsx)("li",{className:"ImageGalleryItem",children:Object(u.jsx)("img",{id:t,src:a,alt:n,onClick:r,className:"ImageGalleryItem-image"})})},p=function(e){var t=e.onClick;return Object(u.jsx)("div",{className:"btn_wrapper",children:Object(u.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})})},j=a(9),b=a.n(j),g=(a(36),function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={page:1,per_page:12,searchResult:[],searchItem:"",error:null,largeImg:"",status:"idle"},e.handleLoadMoreBtnClick=function(){e.setState((function(e){return{per_page:e.per_page+12,page:e.page+1}})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.props.searchItem,r=this.state,c=r.page,s=r.per_page;e.searchItem!==n&&(this.setState({status:"pending"}),fetch("".concat("https://pixabay.com/api/","?q=").concat(n,"&page=").concat(c,"&key=").concat("22569115-02a432c6c1c62bbb3a59801b7","&image_type=photo&orientation=horizontal&per_page=").concat(s,"}")).then((function(e){return e.ok?e.json():Promise.reject(new Error("".concat(n," returned with error")))})).then((function(e){var t=e.hits;return 0===t.length?a.setState({searchResult:[],status:"idle"}):a.setState({searchResult:t}),a.setState({status:"resolved"})})).catch((function(e){return a.setState({error:e,status:"rejected"})})))}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchResult,n=t.error,r=t.status;return"idle"===r?Object(u.jsx)("h2",{children:"hello"}):"pending"===r?Object(u.jsx)("div",{className:"loader_wrapper",children:Object(u.jsx)(b.a,{type:"TailSpin",color:"#3f51b5",height:60,width:60,className:"Loader"})}):"rejected"===r?Object(u.jsx)("h2",{children:n.message}):"resolved"===r?Object(u.jsxs)("section",{children:[Object(u.jsx)("ul",{className:"ImageGallery",children:a.map((function(t){return Object(u.jsx)(m,{id:t.id,src:t.webformatURL,tag:t.tag,currentImage:e.props.currentImage},t.id)}))}),a.length>12&&Object(u.jsx)(p,{onClick:this.handleLoadMoreBtnClick})]}):void 0}}]),a}(n.Component)),f=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(u.jsx)("div",{className:"Overlay",onClick:this.handleBackdropClick,children:Object(u.jsx)("div",{className:"Modal",children:Object(u.jsx)("img",{src:this.props.src,alt:""})})})}}]),a}(n.Component),O=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchItem:"",currentImage:"",modalOpen:!1},e.handleFormSubmit=function(t){e.setState({searchItem:t})},e.handleSearchResult=function(t){0===t.length?e.setState({searchResult:null}):e.setState({searchResult:t})},e.handleItemClick=function(t){e.setState({currentImage:t.currentTarget.src}),e.setState({modalOpen:!0})},e.handleModalClose=function(t){e.setState({modalOpen:!1})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.searchItem,a=e.currentImage,n=e.modalOpen;return Object(u.jsxs)("div",{children:[Object(u.jsx)(d,{onSubmit:this.handleFormSubmit}),Object(u.jsx)(g,{perPage:this.props.per_page,searchItem:t,searchResult:this.handleSearchResult,currentImage:this.handleItemClick}),n&&Object(u.jsx)(f,{src:a,onClose:this.handleModalClose})]})}}]),a}(n.Component),v=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,39)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(O,{})}),document.getElementById("root")),v()}},[[37,1,2]]]);
//# sourceMappingURL=main.9f2f0a35.chunk.js.map